Building DAG of jobs...
candidate job all
	wildcards: 
candidate job peakcall
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job remove_pcrdup
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job remove_mito
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job bamq10sort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job mapq10paired
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job mapq10
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job bamsort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job samtobam
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job map
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job trimming
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job trimming
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job trimming
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job trimming
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job map
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job samtobam
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job bamsort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job mapq10
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job mapq10paired
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job bamq10sort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job remove_mito
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job remove_pcrdup
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job peakcall
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job all
	wildcards: 
Conda environment ../rules/envs/macs2.yaml will be created.
Job counts:
	count	jobs
	1	all
	1	bamq10sort
	1	bamsort
	1	map
	1	mapq10
	1	mapq10paired
	1	peakcall
	1	remove_mito
	1	remove_pcrdup
	1	samtobam
	1	trimming
	11

[Tue Aug 20 12:21:37 2019]
rule trimming:
    input: /work/project/fragencode/tools/atacseq/snakemake/test/subset_1_ATAC62_atacseq_combined_R1.fastq.gz, /work/project/fragencode/tools/atacseq/snakemake/test/subset_1_ATAC62_atacseq_combined_R2.fastq.gz
    output: sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_trim_galore.out, sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_val_1.fq.gz, sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_val_2.fq.gz
    log: logs/trimming/sus_scrofa/liver/pig1/pig1_liver.log
    jobid: 10
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver

outdir=`dirname sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_trim_galore.out`;trim_galore --basename pig1_liver --stringency 3 -q 20 --paired --nextera -o $outdir /work/project/fragencode/tools/atacseq/snakemake/test/subset_1_ATAC62_atacseq_combined_R1.fastq.gz /work/project/fragencode/tools/atacseq/snakemake/test/subset_1_ATAC62_atacseq_combined_R2.fastq.gz > sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_trim_galore.out 2> logs/trimming/sus_scrofa/liver/pig1/pig1_liver.log

[Tue Aug 20 12:21:37 2019]
rule map:
    input: sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_val_1.fq.gz, sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_val_2.fq.gz
    output: sus_scrofa/liver/pig1/mapping/pig1_liver.sam
    log: logs/mapping/sus_scrofa/liver/pig1/pig1_liver.map.log
    jobid: 9
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
    threads: 4

bowtie2 -t -p 4 -X 2000 -x genomes.sus_scrofa -1 sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_val_1.fq.gz -2 sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_val_2.fq.gz --met 60 --met-file logs/mapping/sus_scrofa/liver/pig1/pig1_liver.map.log -S sus_scrofa/liver/pig1/mapping/pig1_liver.sam

[Tue Aug 20 12:21:37 2019]
rule samtobam:
    input: sus_scrofa/liver/pig1/mapping/pig1_liver.sam
    output: sus_scrofa/liver/pig1/mapping/pig1_liver.unsorted.bam
    log: logs/mapping/sus_scrofa/liver/pig1/pig1_liver.tobam.log
    jobid: 8
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
    threads: 4

samtools view sus_scrofa/liver/pig1/mapping/pig1_liver.sam -Sbh -@ 4 -o sus_scrofa/liver/pig1/mapping/pig1_liver.unsorted.bam 2> logs/mapping/sus_scrofa/liver/pig1/pig1_liver.tobam.log

[Tue Aug 20 12:21:37 2019]
rule bamsort:
    input: sus_scrofa/liver/pig1/mapping/pig1_liver.unsorted.bam
    output: sus_scrofa/liver/pig1/mapping/pig1_liver.bam
    log: logs/mapping/sus_scrofa/liver/pig1/pig1_liver.bamsort.log
    jobid: 7
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
    threads: 4

samtools sort -@ 4 -m 4G sus_scrofa/liver/pig1/mapping/pig1_liver.unsorted.bam -O bam -o sus_scrofa/liver/pig1/mapping/pig1_liver.bam 2> logs/mapping/sus_scrofa/liver/pig1/pig1_liver.bamsort.log

[Tue Aug 20 12:21:37 2019]
rule mapq10:
    input: sus_scrofa/liver/pig1/mapping/pig1_liver.bam
    output: sus_scrofa/liver/pig1/mapping/pig1_liver.mono.bam
    log: logs/mapping/sus_scrofa/liver/pig1/pig1_liver.mapq10.log
    jobid: 6
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
    threads: 4

samtools view -@ 4 -F 12 -q 10 -bh sus_scrofa/liver/pig1/mapping/pig1_liver.bam > sus_scrofa/liver/pig1/mapping/pig1_liver.mono.bam 2> logs/mapping/sus_scrofa/liver/pig1/pig1_liver.mapq10.log

[Tue Aug 20 12:21:37 2019]
rule mapq10paired:
    input: sus_scrofa/liver/pig1/mapping/pig1_liver.mono.bam
    output: sus_scrofa/liver/pig1/mapping/pig1_liver.paired.unsorted.bam
    log: logs/mapping/sus_scrofa/liver/pig1/pig1_liver.mapq10.paired.log
    jobid: 5
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
    threads: 4

samtools sort -n -@ 4 -m 4G sus_scrofa/liver/pig1/mapping/pig1_liver.mono.bam -o - | samtools view -h - | awk -f scripts/keep.paired.reads.awk | samtools view -Sbh - > sus_scrofa/liver/pig1/mapping/pig1_liver.paired.unsorted.bam 2> logs/mapping/sus_scrofa/liver/pig1/pig1_liver.mapq10.paired.log

[Tue Aug 20 12:21:37 2019]
rule bamq10sort:
    input: sus_scrofa/liver/pig1/mapping/pig1_liver.paired.unsorted.bam
    output: sus_scrofa/liver/pig1/mapping/pig1_liver.q10.bam
    log: logs/mapping/sus_scrofa/liver/pig1/pig1_liver.bamq10.sort.log
    jobid: 4
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
    threads: 4

samtools sort -@ 4 -m 4G sus_scrofa/liver/pig1/mapping/pig1_liver.paired.unsorted.bam -O bam -o sus_scrofa/liver/pig1/mapping/pig1_liver.q10.bam 2> logs/mapping/sus_scrofa/liver/pig1/pig1_liver.bamq10.sort.log

[Tue Aug 20 12:21:37 2019]
rule remove_mito:
    input: sus_scrofa/liver/pig1/mapping/pig1_liver.q10.bam
    output: sus_scrofa/liver/pig1/filtering/pig1_liver.q10.noMT.bam
    log: logs/filtering/sus_scrofa/liver/pig1/pig1_liver.noMT.log
    jobid: 3
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver

RuleException in line 6 of /work/project/fragencode/tools/atacseq/snakemake/rules/filtering.smk:
NameError: The name 'print $1' is unknown in this context. Please make sure that you defined that variable. Also note that braces not used for variable access have to be escaped by repeating them, i.e. {{print $1}}
