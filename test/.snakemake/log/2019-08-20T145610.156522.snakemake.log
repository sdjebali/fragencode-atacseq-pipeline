Building DAG of jobs...
candidate job all
	wildcards: 
candidate job peakcall
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job remove_pcrdup
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job remove_mito
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job bamq10sort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job mapq10paired
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job mapq10
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job bamsort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job samtobam
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job map
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job trimming
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job trimming
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job trimming
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job trimming
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job map
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job samtobam
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job bamsort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job mapq10
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job mapq10paired
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job bamq10sort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job bamq10index
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job bamq10sort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job bamq10sort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job bamq10index
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job remove_mito
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job remove_pcrdup
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job peakcall
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job all
	wildcards: 
Using shell: /usr/bin/bash
Provided cluster nodes: 30
Job counts:
	count	jobs
	1	all
	1	peakcall
	1	remove_mito
	1	remove_pcrdup
	4

[Tue Aug 20 14:56:14 2019]
rule remove_mito:
    input: sus_scrofa/liver/pig1/mapping/pig1_liver.q10.bam, sus_scrofa/liver/pig1/mapping/pig1_liver.q10.bam.bai
    output: sus_scrofa/liver/pig1/filtering/pig1_liver.q10.noMT.bam
    log: logs/filtering/sus_scrofa/liver/pig1/pig1_liver.noMT.log
    jobid: 3
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver

samtools idxstats sus_scrofa/liver/pig1/mapping/pig1_liver.q10.bam | awk '{print $1}' | grep -v MT | xargs samtools view -bh sus_scrofa/liver/pig1/mapping/pig1_liver.q10.bam sus_scrofa/liver/pig1/mapping/pig1_liver.q10.bam.bai > sus_scrofa/liver/pig1/filtering/pig1_liver.q10.noMT.bam 2> logs/filtering/sus_scrofa/liver/pig1/pig1_liver.noMT.log
Submitted DRMAA job 3 with external jobid 7306900.
[Tue Aug 20 14:56:34 2019]
Finished job 3.
1 of 4 steps (25%) done

[Tue Aug 20 14:56:34 2019]
rule remove_pcrdup:
    input: sus_scrofa/liver/pig1/filtering/pig1_liver.q10.noMT.bam
    output: sus_scrofa/liver/pig1/filtering/pig1_liver.q10.noMT.nodup.bam, sus_scrofa/liver/pig1/filtering/pig1_liver.q10.noMT.nodup.bam.metrics.txt
    log: logs/filtering/sus_scrofa/liver/pig1/pig1_liver.noMTremovePCRdup.log
    jobid: 2
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver

java -jar -Xmx4g /work/project/fragencode/tools/multi/picard-tools-2.20.4/picard.jar MarkDuplicates I=sus_scrofa/liver/pig1/filtering/pig1_liver.q10.noMT.bam O=sus_scrofa/liver/pig1/filtering/pig1_liver.q10.noMT.nodup.bam M=sus_scrofa/liver/pig1/filtering/pig1_liver.q10.noMT.nodup.bam.metrics.txt REMOVE_DUPLICATES=true 2> logs/filtering/sus_scrofa/liver/pig1/pig1_liver.noMTremovePCRdup.log
Submitted DRMAA job 2 with external jobid 7306902.
[Tue Aug 20 14:58:05 2019]
Finished job 2.
2 of 4 steps (50%) done

[Tue Aug 20 14:58:05 2019]
rule peakcall:
    input: sus_scrofa/liver/pig1/filtering/pig1_liver.q10.noMT.nodup.bam
    output: sus_scrofa/liver/pig1/peaks/pig1_liver.q10.noMT.nodup.macs_peaks.narrowPeak
    log: logs/peakcalling/sus_scrofa/liver/pig1/pig1_liver.peakcall.log
    jobid: 1
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver

macs2 callpeak --nomodel -f BAMPE -t sus_scrofa/liver/pig1/filtering/pig1_liver.q10.noMT.nodup.bam -n sus_scrofa/liver/pig1/peaks/pig1_liver.q10.noMT.nodup.macs --keep-dup all --verbose 0 2> logs/peakcalling/sus_scrofa/liver/pig1/pig1_liver.peakcall.log
Submitted DRMAA job 1 with external jobid 7306912.
[Tue Aug 20 14:58:35 2019]
Finished job 1.
3 of 4 steps (75%) done

[Tue Aug 20 14:58:35 2019]
localrule all:
    input: sus_scrofa/liver/pig1/peaks/pig1_liver.q10.noMT.nodup.macs_peaks.narrowPeak
    jobid: 0

[Tue Aug 20 14:58:35 2019]
Finished job 0.
4 of 4 steps (100%) done
Complete log: /work/project/fragencode/tools/atacseq/snakemake/test/.snakemake/log/2019-08-20T145610.156522.snakemake.log
