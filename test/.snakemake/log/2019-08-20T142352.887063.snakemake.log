Building DAG of jobs...
candidate job all
	wildcards: 
candidate job peakcall
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job remove_pcrdup
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job remove_mito
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job bamq10sort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job mapq10paired
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job mapq10
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job bamsort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job samtobam
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job map
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job trimming
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job trimming
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
candidate job trimming
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job trimming
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job map
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job samtobam
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job bamsort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job mapq10
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job mapq10paired
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job bamq10sort
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job remove_mito
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job remove_pcrdup
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job peakcall
	wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
selected job all
	wildcards: 
Using shell: /usr/bin/bash
Provided cluster nodes: 30
Job counts:
	count	jobs
	1	all
	1	bamq10sort
	1	bamsort
	1	map
	1	mapq10
	1	mapq10paired
	1	peakcall
	1	remove_mito
	1	remove_pcrdup
	1	samtobam
	10

[Tue Aug 20 14:23:57 2019]
rule map:
    input: sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_R1_val_1.fq.gz, sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_R2_val_2.fq.gz
    output: sus_scrofa/liver/pig1/mapping/pig1_liver.sam
    log: logs/mapping/sus_scrofa/liver/pig1/pig1_liver.map.log
    jobid: 9
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
    threads: 4

bowtie2 -t -p 4 -X 2000 -x /work/project/fragencode/tools/atacseq/snakemake/test/sus_scrofa.fa -1 sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_R1_val_1.fq.gz -2 sus_scrofa/liver/pig1/trimming/pig1_liver/pig1_liver_R2_val_2.fq.gz --met 60 --met-file logs/mapping/sus_scrofa/liver/pig1/pig1_liver.map.log -S sus_scrofa/liver/pig1/mapping/pig1_liver.sam
Submitted DRMAA job 9 with external jobid 7306383.
[Tue Aug 20 14:32:08 2019]
Finished job 9.
1 of 10 steps (10%) done

[Tue Aug 20 14:32:08 2019]
rule samtobam:
    input: sus_scrofa/liver/pig1/mapping/pig1_liver.sam
    output: sus_scrofa/liver/pig1/mapping/pig1_liver.unsorted.bam
    log: logs/mapping/sus_scrofa/liver/pig1/pig1_liver.tobam.log
    jobid: 8
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
    threads: 4

samtools view sus_scrofa/liver/pig1/mapping/pig1_liver.sam -Sbh -@ 4 -o sus_scrofa/liver/pig1/mapping/pig1_liver.unsorted.bam 2> logs/mapping/sus_scrofa/liver/pig1/pig1_liver.tobam.log
Submitted DRMAA job 8 with external jobid 7306468.
[Tue Aug 20 14:32:28 2019]
Finished job 8.
2 of 10 steps (20%) done

[Tue Aug 20 14:32:28 2019]
rule bamsort:
    input: sus_scrofa/liver/pig1/mapping/pig1_liver.unsorted.bam
    output: sus_scrofa/liver/pig1/mapping/pig1_liver.bam
    log: logs/mapping/sus_scrofa/liver/pig1/pig1_liver.bamsort.log
    jobid: 7
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
    threads: 4

samtools sort -@ 4 -m 4G sus_scrofa/liver/pig1/mapping/pig1_liver.unsorted.bam -O bam -o sus_scrofa/liver/pig1/mapping/pig1_liver.bam 2> logs/mapping/sus_scrofa/liver/pig1/pig1_liver.bamsort.log
Submitted DRMAA job 7 with external jobid 7306501.
Removing temporary output file sus_scrofa/liver/pig1/mapping/pig1_liver.unsorted.bam.
[Tue Aug 20 14:32:48 2019]
Finished job 7.
3 of 10 steps (30%) done

[Tue Aug 20 14:32:48 2019]
rule mapq10:
    input: sus_scrofa/liver/pig1/mapping/pig1_liver.bam
    output: sus_scrofa/liver/pig1/mapping/pig1_liver.mono.bam
    log: logs/mapping/sus_scrofa/liver/pig1/pig1_liver.mapq10.log
    jobid: 6
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
    threads: 4

samtools view -@ 4 -F 12 -q 10 -bh sus_scrofa/liver/pig1/mapping/pig1_liver.bam > sus_scrofa/liver/pig1/mapping/pig1_liver.mono.bam 2> logs/mapping/sus_scrofa/liver/pig1/pig1_liver.mapq10.log
Submitted DRMAA job 6 with external jobid 7306513.
[Tue Aug 20 14:33:18 2019]
Finished job 6.
4 of 10 steps (40%) done

[Tue Aug 20 14:33:18 2019]
rule mapq10paired:
    input: sus_scrofa/liver/pig1/mapping/pig1_liver.mono.bam
    output: sus_scrofa/liver/pig1/mapping/pig1_liver.paired.unsorted.bam
    log: logs/mapping/sus_scrofa/liver/pig1/pig1_liver.mapq10.paired.log
    jobid: 5
    wildcards: sp=sus_scrofa, tiss=liver, anim=pig1, sample=pig1_liver
    threads: 4

samtools sort -n -@ 4 -m 4G sus_scrofa/liver/pig1/mapping/pig1_liver.mono.bam -o - | samtools view -h - | awk -f scripts/keep.paired.reads.awk | samtools view -Sbh - > sus_scrofa/liver/pig1/mapping/pig1_liver.paired.unsorted.bam 2> logs/mapping/sus_scrofa/liver/pig1/pig1_liver.mapq10.paired.log
Submitted DRMAA job 5 with external jobid 7306525.
[Tue Aug 20 14:33:38 2019]
Error in rule mapq10paired:
    jobid: 5
    output: sus_scrofa/liver/pig1/mapping/pig1_liver.paired.unsorted.bam
    log: logs/mapping/sus_scrofa/liver/pig1/pig1_liver.mapq10.paired.log (check log file(s) for error message)
    shell:
        samtools sort -n -@ 4 -m 4G sus_scrofa/liver/pig1/mapping/pig1_liver.mono.bam -o - | samtools view -h - | awk -f scripts/keep.paired.reads.awk | samtools view -Sbh - > sus_scrofa/liver/pig1/mapping/pig1_liver.paired.unsorted.bam 2> logs/mapping/sus_scrofa/liver/pig1/pig1_liver.mapq10.paired.log
        (exited with non-zero exit code)

Error executing rule mapq10paired on cluster (jobid: 5, external: 7306525, jobscript: /work/project/fragencode/tools/atacseq/snakemake/test/.snakemake/tmp.jfzzltsz/snakejob.mapq10paired.5.sh). For detailed error see the cluster log.
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /work/project/fragencode/tools/atacseq/snakemake/test/.snakemake/log/2019-08-20T142352.887063.snakemake.log
